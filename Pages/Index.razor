@page "/"

<PageTitle>Text to Speech POC</PageTitle>
<div class="container">
    <div class="main-content">
        <h1>Text to Speech POC</h1>
        <p>Use this page to upload a file, extract text from it, then convert the text to speech. You can then download the audio file.</p>
        
        <h2>Upload a file</h2>

        <InputFile OnChange="HandleFileSelected" />

        @if (selectedfile != null)
        {
            <p>Selected file: @selectedfile.Name</p>
        }

        <h2>Extract text from the file</h2>

        <button @onclick="AnalyzeFile">Analyze File</button>

        @if (!string.IsNullOrEmpty(audioFileName))
        {
            <h2>Audio Output</h2>
            <audio controls>
                <source src="@($"api/audio/{audioFileName}")" type="audio/wav">
                Your browser does not support the audio element.
            </audio>
            <p>
                <a href="@($"api/audio/{audioFileName}")" download>Download Audio File</a>
            </p>
        }
        
        <button class="settings-button" @onclick="ToggleSidebar">
            <i class="fas fa-cog"></i>
        </button>
    </div>

    <div class="settings-sidebar @((showSidebar) ? "active" : "")">
        <div class="settings-tab-buttons">
            <div class="settings-tab-button @((activeTab == 1) ? "active" : "")" @onclick="ShowSettings">Settings</div>
            <div class="settings-tab-button @((activeTab == 2) ? "active" : "")" @onclick="ShowLog">Log</div>
        </div>
        <div class="settings-tab-content @((activeTab == 1) ? "active" : "")">
            <h3>Settings</h3>
            <div>
                <label for="systemPrompt">System Prompt:</label>
                <textarea id="systemPrompt" @bind="systemPrompt" rows="8" cols="50"></textarea>
            </div>

            <div>
                <label for="userPrompt">User Prompt:</label>
                <textarea id="userPrompt" @bind="userPrompt" rows="6" cols="50"></textarea>
            </div>
        </div>
        <div class="settings-tab-content @((activeTab == 2) ? "active" : "")">
            <h3>Logs</h3>
            <div class="nested-tab-buttons">
                <div class="nested-tab-button @((activeLogTab == 1) ? "active" : "")" @onclick="ShowDocIntelligenceOutput">Document Intelligence</div>
                <div class="nested-tab-button @((activeLogTab == 2) ? "active" : "")" @onclick="ShowCleanedDocIntelligenceOutput">Cleaned Doc Intelligence</div>
                <div class="nested-tab-button @((activeLogTab == 3) ? "active" : "")" @onclick="ShowLLMOutput">Azure OpenAI</div>
            </div>
            <div class="nested-tab-content @((activeLogTab == 1) ? "active" : "")">
                <label for="docIntelligenceOutput">Document Intelligence Output:</label>
                <textarea id="docIntelligenceOutput" @bind="docIntelligenceOutput" rows="20" cols="50"></textarea>
            </div>
            <div class="nested-tab-content @((activeLogTab == 2) ? "active" : "")">
                <label for="cleanedDocIntelligenceOutput">Cleaned Document Intelligence Output:</label>
                <textarea id="cleanedDocIntelligenceOutput" @bind="cleanedDocIntelligenceOutput" rows="20" cols="50"></textarea>
            </div>
            <div class="nested-tab-content @((activeLogTab == 3) ? "active" : "")">
                <label for="llmOutput">Azure OpenAI LLM Output:</label>
                <textarea id="llmOutput" @bind="llmOutput" rows="20" cols="50"></textarea>
            </div>
        </div>
    </div>
</div>

